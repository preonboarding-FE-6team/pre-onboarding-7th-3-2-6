# **ğŸ“–Â 3ì£¼ì°¨ ê³¼ì œ 2 - Best Practice**

### **ê³¼ì œ :**  íˆ¬ì ê´€ë¦¬ ì„œë¹„ìŠ¤ì˜ ê´€ë¦¬ì ê¸°ëŠ¥ êµ¬í˜„

> ê¸°ê°„ :2022ë…„ 11ì›” 12ì¼(í† ) - 2022ë…„ 11ì›” 18ì¼(ê¸ˆ)
<br/>**ğŸ“[ë°°í¬ë§í¬ ë°”ë¡œê°€ê¸°](https://pre-onboarding-7th-3-2-6-gold.vercel.app/)**

### í…ŒìŠ¤íŠ¸ê³„ì •
id: rhkrgus01@test.com<br/>
pw: rhkrgus01

## ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦Â Members

| ìµœìŠ¹ì§„<br/>(íŒ€ì¥)                                                                                     | ì„ì¤€í™<br/>(ë¶€íŒ€ì¥)                                                                                 | ë¬¸ë„ì—°<br/>(ì„œê¸°)                                                                                        | ìµœì›ì˜¤<br/>(ë¶€ì„œê¸°)                                                                                     | ì†Œìœ¤í˜¸<br/>(ë¶€ì„œê¸°)                                                                                 | ì„ ë¯¼ê²½<br/>(íŒ€ì›)                                                                                       | ê³½í˜„<br/>(íŒ€ì›)                                                                                         | ì´ìœ ì§„<br/>(íŒ€ì›)                                                                                       |
| ----------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| <img src="https://avatars.githubusercontent.com/u/46988995?v=4" alt="tooooo1" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/67459853?v=4" alt="helen" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/102936206?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/99406837?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/30254570?v=4" alt="flora" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/76088728?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/73919235?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/42020919?v=4" alt="magictaro" width="60" height="60"> |
| <a href="https://github.com/yondo123">yondo123<a/>| <a href="https://github.com/tesseractjh">tesseractjh<a/> | <a href="https://github.com/Moondoyeon">Moondoyeon</a>| <a href="https://github.com/choi1five">choi1five<a/>                                                                                               | <a href="https://github.com/younhoso">younhoso<a/>                                                                                            | <a href="https://github.com/seonsy44">seonsy44<a/>                                                                                                | <a href="https://github.com/kwakhyun">kwakhyun<a/>                                                                                                | <a href="https://github.com/2ujin">2ujin<a/>                                                                                                   |

## **âš¡ï¸Â Skills**


<div align="center">

![TypeScript](https://img.shields.io/badge/TypeScript-2F74C0.svg?&style=for-the-badge&logo=TypeScript&logoColor=white)
![React](https://img.shields.io/badge/react-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB)
![Styled Components](https://img.shields.io/badge/styled--components-DB7093?style=for-the-badge&logo=styled-components&logoColor=white)
![axios](https://camo.githubusercontent.com/23392fa4fc3ffb6ade29cba7aaffa7741daeb97012c70a062cf2370187d6519e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6178696f732d4646434132383f7374796c653d666f722d7468652d6261646765266c6f676f3d6178696f73266c6f676f436f6c6f723d7768697465)
![Recoil](https://img.shields.io/badge/recoil-f26b00?style=for-the-badge&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIiB2aWV3Qm94PSIwIDAgNjAwIDYwMCI+PGxpbmsgeG1sbnM9IiIgdHlwZT0idGV4dC9jc3MiIGlkPSJkYXJrLW1vZGUiIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iIi8+PGcgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0xNDIuNTM2IDE5OC44NThjMCAyNi4zNi0yMS4zNjggNDcuNzItNDcuNzIgNDcuNzItMjYuMzYgMC00Ny43MjItMjEuMzYtNDcuNzIyLTQ3LjcyczIxLjM2LTQ3LjcyIDQ3LjcyLTQ3LjcyYzI2LjM1NSAwIDQ3LjcyMiAyMS4zNiA0Ny43MjIgNDcuNzIiLz48cGF0aCBkPSJNNTA1LjE4IDQxNC4yMjVIMjM4LjEyNGMtMzUuMjUgMC02My45MjYtMjguNjc0LTYzLjkyNi02My45MjNzMjguNjc4LTYzLjkyNiA2My45MjYtNjMuOTI2aDEyMC43OGMyMC44MTYgMCAzNy43NTMtMTYuOTM4IDM3Ljc1My0zNy43NTZzLTE2LjkzOC0zNy43NTYtMzcuNzUzLTM3Ljc1Nkg5NC44MWMtNy4yMjcgMC0xMy4wODYtNS44Ni0xMy4wODYtMTMuMDg1IDAtNy4yMjcgNS44Ni0xMy4wODYgMTMuMDg1LTEzLjA4NmgyNjQuMDkzYzM1LjI1IDAgNjMuOTIzIDI4LjY3OCA2My45MjMgNjMuOTI2cy0yOC42NzQgNjMuOTIzLTYzLjkyMyA2My45MjNoLTEyMC43OGMtMjAuODIgMC0zNy43NTYgMTYuOTM4LTM3Ljc1NiAzNy43NiAwIDIwLjgxNiAxNi45MzggMzcuNzUzIDM3Ljc1NiAzNy43NTNINTA1LjE4YzcuMjI3IDAgMTMuMDg2IDUuODYgMTMuMDg2IDEzLjA4NSAwIDcuMjI2LTUuODU4IDEzLjA4NS0xMy4wODUgMTMuMDg1eiIvPjxwYXRoIGQ9Ik00NTcuNDY0IDQwMS4xNDJjMC0yNi4zNiAyMS4zNi00Ny43MiA0Ny43Mi00Ny43MnM0Ny43MiAyMS4zNiA0Ny43MiA0Ny43Mi0yMS4zNiA0Ny43Mi00Ny43MiA0Ny43Mi00Ny43Mi0yMS4zNi00Ny43Mi00Ny43MiIvPjwvZz48c3R5bGUgeG1sbnM9IiIgaWQ9ImRhcmstbW9kZS1jdXN0b20tY29sb3IiPgoJCTpyb290ewoJCQktLWJnLWNvbG9yOnJnYmEoMjYsMjYsMjYsMSk7CgkJCS0tdGV4dC1jb2xvcjpyZ2JhKDExMCwxMTAsMTEwLDEpOwoJCQktLWEtY29sb3I6cmdiYSg5MCwxMjAsMTIwLDEpOwoJCQktLWEtdmlzaXRlZC1jb2xvcjpyZ2JhKDEyMCwxMjAsOTAsMSk7CgkJCS0tYS1ob3Zlci1jb2xvcjpyZ2JhKDIxMSwyMTEsMjExLDEpOwoJCQktLWlucHV0LWJvcmRlci1jb2xvcjpyZ2JhKDIxMSwyMTEsMjExLDAuMik7CgkJCS0taW5wdXQtcGxhY2Vob2xkZXItY29sb3I6cmdiYSgxNzMsMjE2LDIzMCwxKTsKCQkJLS1kaWFsb2ctYmctY29sb3I6cmdiYSgzNiwzNiwzNiwwLjk1KTsKCQkJLS1iZy1pbWFnZTpsaW5lYXItZ3JhZGllbnQocmdiYSgyNiwyNiwyNiwxKSxyZ2JhKDI2LDI2LDI2LDEpKTsKCQl9Cgk8L3N0eWxlPjwvc3ZnPg==)
<img alt="Redux" src="https://img.shields.io/badge/Redux-7649BB.svg?&style=for-the-badge&logo=Redux&logoColor=white"/>
<img height="29" alt="React-query" src="https://img.shields.io/badge/React Query-FF4154?style=flat&logo=React Query&logoColor=white"/>
<img alt="Nextjs" src="https://img.shields.io/badge/Next.js-000000.svg?&style=for-the-badge&logo=Next.js&logoColor=white"/>

</div>

## **ğŸ“¢Â í”„ë¡œì íŠ¸ ì‹¤í–‰ë°©ë²•**

ì‹¤í–‰í•  ë•Œ ë°˜ë“œì‹œ ë‹¤ìŒ íŒŒì¼ì„ ìµœìƒë‹¨ì— ìƒì„±í›„ ì‹¤í–‰ í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.

```jsx
// .env.local
NEXT_PUBLIC_SERVER_URL='https://preonboarding-json-server.herokuapp.com'
NEXT_PUBLIC_CLIENT_URL='http://localhost:3000'

```

```jsx
npm install // ì„¤ì¹˜
npm run dev // ì‹¤í–‰
```

## ğŸš€ ê¸°ëŠ¥ìš”êµ¬ì‚¬í•­

- **ë ˆì´ì•„ì›ƒ**
    - Header - í˜„ì¬ ë³´ê³ ìˆëŠ” ë©”ë‰´ ì™€ ì‚¬ìš©ìëª… ë³´ì—¬ì¤˜ì•¼ í•¨
    - Sider - í˜„ì¬ ë³´ê³ ìˆëŠ” ë©”ë‰´ í•˜ì´ë¼ì´íŠ¸
    - Footer - Copyright Â© December and Company Inc. ê°€ìš´ë° ì •ë ¬
- **ê³„ì¢Œëª©ë¡**
    - ë¸Œë¡œì»¤ëª…, ê³„ì¢Œ í™œì„±í™” ì—¬ë¶€, ê³„ì¢Œ ìƒíƒœ í•„í„°ë§
    - ê²€ìƒ‰, í˜ì´ì§€ë„¤ì´ì…˜
    - ê¸°íƒ€
        - ê³ ê°ëª… í´ë¦­ì‹œ ì‚¬ìš©ì ìƒì„¸í™”ë©´ìœ¼ë¡œ ì´ë™
        - ê³„ì¢Œë²ˆí˜¸ë¥¼ ëˆ„ë¥´ë©´ ê³„ì¢Œìƒì„¸ í™”ë©´ìœ¼ë¡œ ì´ë™
        - ê³„ì¢Œë²ˆí˜¸ ì•ë’¤ ë‘ê¸€ì ì œì™¸í•˜ê³  ë‚˜ë¨¸ì§€  `*` ë§ˆìŠ¤í‚¹ ì²˜ë¦¬
- **ê³„ì¢Œìƒì„¸**
- **ì‚¬ìš©ì ëª©ë¡**
    - í™œì„±í™” ì—¬ë¶€, ì„ì§ì› ê³„ì¢Œ ì—¬ë¶€ë¥¼ í•„í„°ë§
    - ê²€ìƒ‰, í˜ì´ì§€ë„¤ì´ì…˜
    - ì‹ ê·œ ì‚¬ìš©ì ì¶”ê°€, ì˜ëª» ìƒì„±í•œ ì‚¬ìš©ì ì‚­ì œ, ì‚¬ìš©ìëª… ë³€ê²½
    - ê¸°íƒ€
        - ê³ ê°ëª…: ê°€ìš´ë° ê¸€ì ë§ˆìŠ¤í‚¹, ë‘ê¸€ìì¼ ê²½ìš° ì„±ì„ ì œì™¸í•œ ì´ë¦„ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬, 4ê¸€ì ì´ìƒì¼ ê²½ìš° ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ í›„ ì•ë’¤ í•œê¸€ìë§Œ í‘œê¸°, ê³ ê°ëª…ì„ í´ë¦­ì‹œ ì‚¬ìš©ì ìƒì„¸í™”ë©´ìœ¼ë¡œ ì´ë™
        - íœ´ëŒ€í° ë²ˆí˜¸ (ê°€ìš´ë° 4ìë¦¬ `***` ë¡œ ë§ˆìŠ¤í‚¹)
- **ì‚¬ìš©ì ìƒì„¸**

## ğŸ–¥ Demo
ë¡œê·¸ì¸|ê³„ì¢Œëª©ë¡ ì •ë ¬
:-|:-
![login (1)](https://user-images.githubusercontent.com/102936206/202605000-8e583df3-1ba7-41be-8f4a-f8ac786c748d.gif)|![filter-preface](https://user-images.githubusercontent.com/102936206/202604777-a30ca0b6-2888-492d-94f6-7dd1dcd25df0.gif)
**ê³„ì¢Œëª©ë¡-í˜ì´ì§€ë„¤ì´ì…˜,ê²€ìƒ‰**|**ê³„ì¢Œìƒì„¸-ê³„ì¢Œëª…ë³€ê²½**
![pagenation-search-preface](https://user-images.githubusercontent.com/102936206/202605337-29486e7b-4b35-406d-86ff-f6c677b381a2.gif)|![account-detail-edit](https://user-images.githubusercontent.com/102936206/202609424-e088fcdc-3e03-465f-a14f-42ad8fa95f82.gif)
**ì‚¬ìš©ìëª©ë¡-ì •ë ¬**|**ì‚¬ìš©ìëª©ë¡-í˜ì´ë„¤ì´ì…˜,ê²€ìƒ‰**
![filter-preface-users](https://user-images.githubusercontent.com/102936206/202605368-fbcc6265-5edc-4103-a2b7-0812301860f9.gif)|![pagenation-search-preface-users](https://user-images.githubusercontent.com/102936206/202605419-b43de6ff-3648-440d-abb4-d66899a93cd0.gif)
**ì‚¬ìš©ììƒì„¸-ì‚¬ìš©ìëª…ìˆ˜ì •, ì‚¬ìš©ìì‚­ì œ**
![edit-delete-users](https://user-images.githubusercontent.com/102936206/202605488-42fb6793-ebca-4500-b2ec-5d0c69d84f0a.gif)


## **ğŸ‘Â Best Practice**

### 1. ë ˆì´ì•„ì›ƒ

ê³µí†µ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬ (ë ˆì´ì•„ì›ƒì´ ë¶ˆí•„ìš”í•œ 

- header, Sider, footer ì™€ ê°™ì€ ì»´í¬ë„ŒíŠ¸ë¥¼ í•©ì³ ê³µí†µëœ ë ˆì´ì•„ì›ƒì„ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
- pathnameì— ë”°ë¼ ë ˆì´ì•„ì›ƒ(Sider, Header, Footer) ë Œë”ë§ ì—¬ë¶€ë¥¼ ê²°ì •í–ˆìŠµë‹ˆë‹¤.
```tsx
// pages/_app.tsx
function App({ Component, pageProps }: AppProps) {
  return (
    <QueryClientProvider client={queryClient}>
      <GlobalStyle />
      <ThemeProvider theme={colors}>
        <Provider store={store}>
          <PersistGate loading={null} persistor={persistor}>
            <Layout>
              <Component {...pageProps} />
            </Layout>
          </PersistGate>
        </Provider>
      </ThemeProvider>
    </QueryClientProvider>
  );
}
```
```tsx
// components/Layout/index.tsx
function Layout({ children }: Props) {
  const { pathname, asPath } = useRouter();
  const contentRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    contentRef.current?.scrollTo(0, 0);
  }, [asPath]);

  if (pathname === '/' || pathname.startsWith('/accounts') || pathname.startsWith('/users'))
    return (
      <Container>
        <Sider />
        <Header />
        <Content ref={contentRef}>
          <ChildrenContainer>{children}</ChildrenContainer>
          <Footer />
        </Content>
      </Container>
    );

  return <>{children}</>;
}

export default Layout;
```
### 2.  ë¡œê·¸ì¸
- ì¿ í‚¤ì‚¬ìš© - SSRì„ ìœ„í•œ **`getServerSideProps`** í•¨ìˆ˜ëŠ” ì„œë²„ì—ì„œ í˜¸ì¶œë˜ê¸°ë•Œë¬¸ì— ë¡œì»¬ìŠ¤í† ë¦¬ì§€ë‚˜ ì„¸ì…˜ìŠ¤í† ë¦¬ì§€ì˜ ê²½ìš° ì ‘ê·¼ ì–´ë ¤ì›€
```tsx
const { mutate } = useMutation((data: { email: string; password: string }) => AuthService.signin(data), {
  onSuccess: (data) => {
    CookieToken.set(data.accessToken);
    router.replace('/');
  },
});
```
- í† í° ë§Œë£Œ ì‹œ
```tsx
export const getServerSideProps: GetServerSideProps = async ({ req, res, query }) => {
  ...

  try {
    accountsRes = await axios.get<Account[]>(
      `http://localhost:4000/accounts?...`,
      {
        headers: { Authorization: `Bearer ${token}` },
      }
    );
  } catch (error) {
    if (error instanceof AxiosError && error.response?.status === 401) {
      res.setHeader('Set-Cookie', [`${COOKIE_TOKEN_KEY}=${TOKEN_EXPIRED}; Path=/`]);
      return {
        redirect: {
          destination: '/signin',
        },
      };
    }
  }
  ```
### 3. ê³„ì¢Œ ëª©ë¡ / ì‚¬ìš©ì ëª©ë¡
### Universal SSR
ìµœì´ˆ 1íšŒ ë¶ˆëŸ¬ì˜¬ ë•Œ SSRë¡œ ë Œë”ë§, ê·¸ ì´í›„ í•„í„° ë³€ê²½/í˜ì´ì§€ ë³€ê²½/ê²€ìƒ‰ì–´ ë³€ê²½ ë“±ì´ ì¼ì–´ë‚˜ë©´ CSRë¡œ ë Œë”ë§
```tsx
// pages/accounts/index.tsx
export const getServerSideProps: GetServerSideProps = async ({ req, res, query }) => {
  const token = req.cookies[COOKIE_TOKEN_KEY];
  const { page, limit, broker_id: brokerId = 'all', status = 'all', is_active: isActive = 'all', search = '' } = query;
  const initialQuery = { page: Number(page) || 1, limit: Number(limit) || 30, brokerId, status, isActive, search };
  const queryClient = new QueryClient();

  try {
    const { data, headers } = await axios.get<Account[]>(
      `${process.env.NEXT_PUBLIC_SERVER_URL}/accounts?${getQueryString(
        initialQuery,
        AccountsService.accountsQueryConverter
      )}`,
      {
        headers: { Authorization: `Bearer ${token}` },
      }
    );
    const queryFn = () => Promise.resolve({ data, totalLength: Number(headers?.['x-total-count'] ?? 0) });
    await queryClient.prefetchQuery(['accounts', initialQuery], queryFn);
  } catch (error) {
    if (error instanceof AxiosError && error.response?.status === 401) {
      res.setHeader('Set-Cookie', [`${COOKIE_TOKEN_KEY}=${TOKEN_EXPIRED}; Path=/`]);
      return {
        redirect: {
          destination: '/signin',
        },
        props: {},
      };
    }
  }

  return {
    props: { dehydratedState: dehydrate(queryClient) },
  };
};
```
1. ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì¿ í‚¤ë¥¼ í†µí•´ í† í°ì„ ë°›ì•„ì˜¤ê³ , ì´ í† í°ì„ í†µí•´ API ìš”ì²­ì„ ë³´ë‚¸ë‹¤. 
2. React Query Clientë¥¼ ìƒì„±í•˜ì—¬ API ìš”ì²­ì˜ ê²°ê³¼ë¥¼ prefetchí•˜ê³  pagePropsë¡œ dehydrateí•˜ì—¬ ì „ë‹¬í•œë‹¤.
```tsx
// pages/_app.tsx
const queryClient = new QueryClient();

function App({ Component, pageProps }: AppProps) {
  return (
    <QueryClientProvider client={queryClient}>
      <Hydrate state={pageProps.dehydratedState}>
        <GlobalStyle />
        <ThemeProvider theme={colors}>
          <Provider store={store}>
            <Layout>
              <Component {...pageProps} />
            </Layout>
          </Provider>
        </ThemeProvider>
        <ReactQueryDevtools />
      </Hydrate>
    </QueryClientProvider>
  );
}

export default App;
```
3. í´ë¼ì´ì–¸íŠ¸ì—ì„œ dehydrateëœ api ìš”ì²­ ê²°ê³¼ë¥¼ pagePropsì—ì„œ ë°›ì•„ì„œ hydrateí•¨
4. í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­í•œ ë‹¤ë¥¸ ê°’ë“¤ê³¼ ë™ì¼í•˜ê²Œ useQueryë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•¨

### ë§ˆìŠ¤í‚¹ ì²˜ë¦¬

- ì´ë¦„

```tsx
export const maskingName = (name: string) => {
  const nameArr = name.split('');
  let parsedName = '';
  nameArr.forEach((n, i) => {
    if (i === 0 || (i === nameArr.length - 1 && i !== 1) || n === ' ') parsedName += n;
    else parsedName += '*';
  });
  return parsedName;
};
```

- ì „í™”ë²ˆí˜¸

```jsx
export const maskingPhoneNum = (number: string) => `${number.slice(0, 4)}****${number.slice(8)}`;
```

- ê³„ì¢Œë²ˆí˜¸

```tsx
export const parseAccountNumber = (number: string) => {
  let maskedNum = number.slice(0, 2);
  for (let i = 0; i < number.length - 4; i++) {
    maskedNum += '*';
  }
  return maskedNum + number.slice(number.length - 2);
};
```

### í˜ì´ì§€ë„¤ì´ì…˜

- response Headerì˜ X-Total-Countì— totalLengthë¡œ ì „ì²´ í˜ì´ì§€ ìˆ˜ ê³„ì‚°

```jsx
// src/hooks/useAccount.ts
const { data } = useQuery(['accounts', accountQuery], () => AccountsService.getAccounts(accountQuery), {
  ...AccountsService.accountsQueryOptions,
  enabled,
});

...

return {
  page: Number(accountQuery.page),
  limit: Number(accountQuery.limit),
  search: String(accountQuery.search),
  dispatchPage,
  dispatchSearch,
  data: data?.totalLength ? data?.data ?? [] : [],
  totalLength: data?.totalLength ?? 0,
};
```

ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜

```jsx
// src/components/Accounts/Pagenation.tsx
function Pagenation({ contents, totalLength, page, limit, dispatchPage }: Props) {
	...
	const totalPage = Math.ceil(Number(totalLength) / limit);
	const generatePages = () => {
	  let startPage = (page - 1) / PER_PAGE;
	  startPage = Math.floor(startPage) * PER_PAGE + 1;
	  return new Array(5)
	    .fill(null)
	    .map((_, i) => i + startPage)
	    .filter((item) => item <= totalPage);
	};
	
	return(
		<Container>
			// ...
			{generatePages().map((i: number) => (
	      <Page key={i} onClick={() => handleTargetClick(i)} className={i === page ? ' active' : ''}>
	        {i}
	      </Page>
	    ))}
			// ...
		</Container>
	)
}
```


### 4. ë¦¬ë•ìŠ¤ë¥¼ ì‚¬ìš©í•œ ìƒíƒœê´€ë¦¬

- redux-toolkitì˜ sliceë¥¼ í™œìš©í•˜ì—¬ ê´€ì‹¬ì‚¬ ë³„ ìƒíƒœ ë¶„ë¦¬
    - accoutQuery - ê³„ì¢Œ ëª©ë¡ í˜ì´ì§€ í˜ì´ì§€ë„¤ì´ì…˜ ë° í•„í„° ê´€ë¦¬
    - userQuery - ì‚¬ìš©ì ëª©ë¡ í˜ì´ì§€ í˜ì´ì§€ë„¤ì´ì…˜ ë° í•„í„° ê´€ë¦¬
    - headerTitle - í™œì„±í™”ëœ í˜ì´ì§€ëª…ìœ¼ë¡œ Header ì»´í¬ë„ŒíŠ¸ì—ì„œ ë Œë”
    - reLoginModalSlice - í† ê·¼ ë§Œë£Œ ì‹œ ì¬ë¡œê·¸ì¸ ëª¨ë‹¬ì°½ ì˜¤í”ˆ ì—¬ë¶€ ê´€ë¦¬
- state, dispatchë¥¼ ì‚¬ìš©í•˜ëŠ” ì»¤ìŠ¤í…€í›…ì„ ì‘ì„±

```tsx
// store/useQuerySlice.ts

export const userQuerySlice = createSlice({
  name: 'userQuery',
  initialState,
  reducers: {
    setPage: (state, action: { payload: number }) => {
      state.page = action.payload;
    },
    setLimit: (state, action: { payload: number }) => {
      state.limit = action.payload;
    },
    
		...
	
  },
});

export const { setPage, setLimit, setIsActive, setIsStaff, setSearch } = userQuerySlice.actions;
```

```tsx
// hooks/useUserQueryState.ts

function useUserQueryState() {
  const { userQuery } = useSelector((state: { userQuery: UserQueryState }) => state);

  const isActive = userQuery.is_active ?? 'all';
  const isStaff = userQuery.is_staff ?? 'all';
  const search = userQuery.search ?? '';
  const { page, limit } = userQuery;

  return { isActive, isStaff, page, limit, search };
}

export default useUserQueryState;
```

```tsx
// hooks/useUserQueryDispatch.ts

function useUserQueryDispatch() {
  const dispatch = useDispatch();

  const dispatchIsActive = (isActive: string) => {
    dispatch(setIsActive(isActive));
    setQueryParams({ is_active: isActive });
  };

  const dispatchIsStaff = (isStaff: string) => {
    dispatch(setIsStaff(isStaff));
    setQueryParams({ is_staff: isStaff });
  };

  ...

  return { dispatchIsActive, dispatchIsStaff, dispatchPage, dispatchSearch, dispatchLimit };
}

export default useUserQueryDispatch;
```

### 5. React-Queryë¥¼ ì‚¬ìš©í•œ api ìš”ì²­

axios ìš”ì²­ì„ í•˜ëŠ” ì„œë¹„ìŠ¤ ë¡œì§ì€ ë¶„ë¦¬í•˜ê³  ë¦¬ì•¡íŠ¸ì¿¼ë¦¬ì˜ useMutationì„ í™œìš©í•œ ì»¤ìŠ¤í…€ í›…ì„ ë§Œë“¤ì–´ ì„œë²„ë°ì´í„°ì˜ ë³€ê²½ì‘ì—…(ì‚¬ìš©ì ì¶”ê°€ ë° ì‚­ì œ, ì‚¬ìš©ìëª… ë³€ê²½, ë¡œê·¸ì¸)ì„ ìš”ì²­í•˜ì˜€ìŠµë‹ˆë‹¤.

- ì„œë¹„ìŠ¤ ë¡œì§

```tsx
// AccountsService.ts

const AccountsService = {

  async patchAccount(id: string, data: { name: string }) {
    const res = await axios({ bearer: true }).patch<Account>(`/accounts/${id}`, data);
    return res.data;
  },
};

export default AccountsService;

// AuthService.ts

const AuthService = {
  async signin({ email, password }: AuthLogin) {
    const res = await axios({ bearer: false }).post<AuthResponse, AxiosResponse<AuthResponse>, AuthLogin>('/login', {
      email,
      password,
    });
    return res.data;
  },
};

export default AuthService;

// UserService.ts

const UserService = {

  async patchUser(id: string, data: { name: string }) {
    const res = await axios({ bearer: true }).patch<User>(`/users/${id}`, data);
    return res.data;
  },

  async deleteUser(id: string) {
    const res = await axios({ bearer: true }).delete(`/users/${id}`);
    return res.data;
  },
};

export default UserService;
```

- useMutationì„ ì‚¬ìš©í•œ ì»¤ìŠ¤í…€ í›…

```tsx
// ê³„ì¢Œ ìˆ˜ì •

const { mutate } = useMutation((data: { name: string }) => AccountsService.patchAccount(account.uuid, data), {
    onSuccess: (data) => {
      setAccountData(data);
    },
  });

// ë¡œê·¸ì¸

const { mutate } = useMutation((data: { email: string; password: string }) => AuthService.signin(data), {
    onSuccess: (data) => {
      CookieToken.set(data.accessToken);
      router.replace('/');
    },
  });

// ì‚¬ìš©ì ì´ë¦„ ìˆ˜ì •

const { mutate } = useMutation((data: { name: string }) => UserService.patchUser(userData.uuid, data), {
    onSuccess: (data) => {
      setUserData(data);
    },
  });
```



## ğŸ“¦Â íŒŒì¼êµ¬ì¡°
```
ğŸ“¦src
 â”£ ğŸ“‚components
 â”ƒ â”£ ğŸ“‚AccountDetail
 â”ƒ â”ƒ â”£ ğŸ“œColumns.tsx
 â”ƒ â”ƒ â”£ ğŸ“œTable.tsx
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx
 â”ƒ â”£ ğŸ“‚Accounts
 â”ƒ â”ƒ â”£ ğŸ“œPagenation.tsx
 â”ƒ â”ƒ â”£ ğŸ“œTable.tsx
 â”ƒ â”ƒ â”£ ğŸ“œTableBodyRow.tsx
 â”ƒ â”ƒ â”£ ğŸ“œTableHeadRow.tsx
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx
 â”ƒ â”£ ğŸ“‚Layout
 â”ƒ â”ƒ â”£ ğŸ“œFooter.tsx
 â”ƒ â”ƒ â”£ ğŸ“œHeader.tsx
 â”ƒ â”ƒ â”£ ğŸ“œSeo.tsx
 â”ƒ â”ƒ â”£ ğŸ“œSider.tsx
 â”ƒ â”ƒ â”£ ğŸ“œSiderItem.tsx
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx
 â”ƒ â”£ ğŸ“‚UI
 â”ƒ â”ƒ â”£ ğŸ“œBodyColumn.tsx
 â”ƒ â”ƒ â”£ ğŸ“œHeadColumn.tsx
 â”ƒ â”ƒ â”— ğŸ“œSelectBox.tsx
 â”ƒ â”£ ğŸ“‚UserDetail
 â”ƒ â”ƒ â”£ ğŸ“œColumns.tsx
 â”ƒ â”ƒ â”£ ğŸ“œDeleteModal.tsx
 â”ƒ â”ƒ â”£ ğŸ“œUserInfoTable.tsx
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx
 â”ƒ â”£ ğŸ“‚Users
 â”ƒ â”ƒ â”£ ğŸ“œTable.tsx
 â”ƒ â”ƒ â”£ ğŸ“œTableBodyRow.tsx
 â”ƒ â”ƒ â”£ ğŸ“œTableHeadRow.tsx
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx
 â”ƒ â”— ğŸ“‚signin
 â”ƒ â”ƒ â”£ ğŸ“œButton.tsx
 â”ƒ â”ƒ â”£ ğŸ“œFormTitle.tsx
 â”ƒ â”ƒ â”£ ğŸ“œInput.tsx
 â”ƒ â”ƒ â”£ ğŸ“œReLoginModal.tsx
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx
 â”£ ğŸ“‚hooks
 â”ƒ â”£ ğŸ“œuseAccountNameEdit.ts
 â”ƒ â”£ ğŸ“œuseAccountQueryDispatch.ts
 â”ƒ â”£ ğŸ“œuseAccountQueryState.ts
 â”ƒ â”£ ğŸ“œuseAccountURL.ts
 â”ƒ â”£ ğŸ“œuseAccounts.ts
 â”ƒ â”£ ğŸ“œuseDeleteModal.ts
 â”ƒ â”£ ğŸ“œuseEdit.ts
 â”ƒ â”£ ğŸ“œuseExpiredToken.ts
 â”ƒ â”£ ğŸ“œuseHeaderTitleDispatch.ts
 â”ƒ â”£ ğŸ“œuseParseAccountData.ts
 â”ƒ â”£ ğŸ“œuseParseUserData.ts
 â”ƒ â”£ ğŸ“œuseParseUserDetailData.ts
 â”ƒ â”£ ğŸ“œuseSignin.ts
 â”ƒ â”£ ğŸ“œuseSignout.ts
 â”ƒ â”£ ğŸ“œuseUserNameEdit.ts
 â”ƒ â”£ ğŸ“œuseUserQueryDispatch.ts
 â”ƒ â”£ ğŸ“œuseUserQueryState.ts
 â”ƒ â”£ ğŸ“œuseUserURL.ts
 â”ƒ â”— ğŸ“œuseUsers.ts
 â”£ ğŸ“‚pages
 â”ƒ â”£ ğŸ“‚accounts
 â”ƒ â”ƒ â”£ ğŸ“œ[accountId].tsx
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx
 â”ƒ â”£ ğŸ“‚users
 â”ƒ â”ƒ â”£ ğŸ“œ[userId].tsx
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx
 â”ƒ â”£ ğŸ“œ_app.tsx
 â”ƒ â”£ ğŸ“œ_document.tsx
 â”ƒ â”£ ğŸ“œindex.tsx
 â”ƒ â”— ğŸ“œsignin.tsx
 â”£ ğŸ“‚repositories
 â”ƒ â”— ğŸ“œCookieTokenRepository.ts
 â”£ ğŸ“‚services
 â”ƒ â”£ ğŸ“œAccountService.ts
 â”ƒ â”£ ğŸ“œAuthService.ts
 â”ƒ â”— ğŸ“œUserService.ts
 â”£ ğŸ“‚store
 â”ƒ â”£ ğŸ“œaccountQuerySlice.ts
 â”ƒ â”£ ğŸ“œheaderTitleSlice.ts
 â”ƒ â”£ ğŸ“œindex.ts
 â”ƒ â”£ ğŸ“œreLoginModalSlice.ts
 â”ƒ â”— ğŸ“œuserQuerySlice.ts
 â”£ ğŸ“‚styles
 â”ƒ â”£ ğŸ“œGlobalStyles.ts
 â”ƒ â”£ ğŸ“œglobals.css
 â”ƒ â”£ ğŸ“œmixins.ts
 â”ƒ â”— ğŸ“œtheme.ts
 â”£ ğŸ“‚type
 â”ƒ â”£ ğŸ“œaccount.ts
 â”ƒ â”£ ğŸ“œauth.ts
 â”ƒ â”— ğŸ“œuser.ts
 â”£ ğŸ“‚utils
 â”ƒ â”£ ğŸ“œconst.ts
 â”ƒ â”£ ğŸ“œgetAxios.ts
 â”ƒ â”£ ğŸ“œgetSelectOptions.ts
 â”ƒ â”£ ğŸ“œmaskingName.ts
 â”ƒ â”£ ğŸ“œmaskingPhoneNum.ts
 â”ƒ â”£ ğŸ“œparseAccountNumber.ts
 â”ƒ â”£ ğŸ“œparseDate.ts
 â”ƒ â”— ğŸ“œparseDateTime.ts
 â”— ğŸ“œmiddleware.ts
```

## **ğŸ“šÂ íŒ€ ê·œì¹™**

- **ğŸ“•Â Git commit convention**
    
    
    | rule | ì„¤ëª… |
    | --- | --- |
    | Feat | ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ |
    | Fix | ë²„ê·¸ ê³ ì¹œ ê²½ìš° |
    | Design | css ìˆ˜ì • |
    | Chore | ë¹Œë“œ ì—…ë¬´ ìˆ˜ì •, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ìˆ˜ì • |
    | !HOTFIX | ê¸‰í•˜ê²Œ ì¹˜ëª…ì ì¸ ë²„ê·¸ë¥¼ ê³ ì³ì•¼í•˜ëŠ” ê²½ìš° |
    | Docs | ë¬¸ì„œ ìˆ˜ì • |
    | Style | ì½”ë“œ formatting, ì„¸ë¯¸ì½œë¡ (;) ëˆ„ë½, ì½”ë“œ ë³€ê²½ì´ ì—†ëŠ” ê²½ìš° |
    | Rename | íŒŒì¼ ë° í´ë” êµ¬ì¡° ë³€ê²½ |
    | Refactor | ì½”ë“œ ë¦¬íŒ©í† ë§ |
    | Test | í…ŒìŠ¤íŠ¸ ì½”ë“œ, ë¦¬íŒ©í† ë§ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€ |
    | Remove | íŒŒì¼ ì‚­ì œ |
    | Modify | ì½”ë“œ ë‹¨ìˆœ ìˆ˜ì • |
- **ğŸ“˜Â Git branch strategy**
- main (ë°°í¬/ìš´ì˜) â† develop (í†µí•© ê°œë°œ) â† feat-ê°œë°œë‚´ìš© (ë‹¨ìœ„ ê°œë°œ)
